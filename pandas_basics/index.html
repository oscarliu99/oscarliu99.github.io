<!DOCTYPE html>





<html class="theme-next gemini use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Header1.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Header1.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Header1.png?v=7.3.0">
  <meta name="baidu-site-verification" content="4Z230QvLFPWJYfG5">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Pandas(Python data analysis library) basics 12import numpy as npimport pandas as pd  pd.Series() is similar to np.array() but we can assign series with a string or datetime index rather than just nume">
<meta name="keywords" content="Python,Pandas">
<meta property="og:type" content="article">
<meta property="og:title" content="Pandas basics">
<meta property="og:url" content="https://yuxuanliu.tech/pandas_basics/index.html">
<meta property="og:site_name" content="Logical thinking">
<meta property="og:description" content="Pandas(Python data analysis library) basics 12import numpy as npimport pandas as pd  pd.Series() is similar to np.array() but we can assign series with a string or datetime index rather than just nume">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-09-16T16:42:37.653Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pandas basics">
<meta name="twitter:description" content="Pandas(Python data analysis library) basics 12import numpy as npimport pandas as pd  pd.Series() is similar to np.array() but we can assign series with a string or datetime index rather than just nume">
  <link rel="canonical" href="https://yuxuanliu.tech/pandas_basics/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Pandas basics | Logical thinking</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Logical thinking</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Keep exploring</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
      </li>
    
  </ul>

    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>


    </div>
</nav>
</div>
    </header>

    

  <a href="https://github.com/oscarliu99" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yuxuanliu.tech/pandas_basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuxuan Liu">
      <meta itemprop="description" content="Welcome to my personal blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logical thinking">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">Pandas basics

            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 11-09-2019 23:36:17" itemprop="dateCreated datePublished" datetime="2019-09-11T23:36:17+01:00">11-09-2019</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 16-09-2019 17:42:37" itemprop="dateModified" datetime="2019-09-16T17:42:37+01:00">16-09-2019</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a></span>

                
                
              
            </span>
          

          
            
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="fa fa-comment-o"></i>
    </span>
    <span class="post-meta-item-text">Comments: </span>
  
    <a href="/pandas_basics/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/pandas_basics/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Pandas-Python-data-analysis-library-basics"><a href="#Pandas-Python-data-analysis-library-basics" class="headerlink" title="Pandas(Python data analysis library) basics"></a>Pandas(Python data analysis library) basics</h2><ol>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>pd.Series()</code> is similar to <code>np.array()</code> but we can assign series with a <strong>string</strong> or <strong>datetime</strong> index rather than just numerical index.</p>
<ul>
<li><p>Convert list, array and dictionary to a series:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">list1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>]</span><br><span class="line">array1 = np.array([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>])</span><br><span class="line">dict1 = &#123;<span class="number">1</span>:<span class="number">10</span>,<span class="number">2</span>:<span class="number">20</span>,<span class="number">3</span>:<span class="number">30</span>,<span class="number">4</span>:<span class="number">40</span>&#125;</span><br><span class="line">series1 = pd.Series(list1)</span><br><span class="line">series2 = pd.Series(array1)</span><br><span class="line">series3 = pd.Series(dict1)</span><br><span class="line">print(series1)</span><br><span class="line">print(series2)</span><br><span class="line">print(series3)</span><br></pre></td></tr></table></figure>

<p>By default, we have ascending numerical index</p>
<a id="more"></a>
</li>
<li><p>Assign index to a series</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">index1 = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>]</span><br><span class="line">list1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>]</span><br><span class="line">array1 = np.array([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>])</span><br><span class="line">dict1 = &#123;<span class="string">"a"</span>:<span class="number">10</span>,<span class="string">"b"</span>:<span class="number">20</span>,<span class="string">"c"</span>:<span class="number">30</span>,<span class="string">"d"</span>:<span class="number">40</span>&#125;</span><br><span class="line">series1 = pd.Series(list1,index1)</span><br><span class="line">series2 = pd.Series(array1,index1)</span><br><span class="line">series3 = pd.Series(dict1)</span><br><span class="line">print(series1)</span><br><span class="line">print(series2)</span><br><span class="line">print(series3)</span><br></pre></td></tr></table></figure>

<p>We now have a string index <code>&quot;a&quot;</code>, <code>&quot;b&quot;</code>, <code>&quot;c&quot;</code> and <code>&quot;d&quot;</code></p>
</li>
<li><p>Indexing series</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">series1 = pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="string">"USA"</span>,<span class="string">"CHINA"</span>,<span class="string">"UK"</span>,<span class="string">"IRELAND"</span>])</span><br><span class="line">series2 = pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="string">"USA"</span>,<span class="string">"CHINA"</span>,<span class="string">"FRANCE"</span>,<span class="string">"GERMANY"</span>])</span><br><span class="line">value = series1[<span class="string">"USA"</span>]</span><br><span class="line"><span class="comment">#value = series1.USA</span></span><br><span class="line">print(value)</span><br><span class="line">series3 = series1 + series2</span><br><span class="line">print(series3)</span><br></pre></td></tr></table></figure>

<p>There are two ways of indexing, see above. </p>
<p>Also, we can do mathematical operations between two series. Pandas will only carry out operations between values with the same index. For those index without a matching index in the other series, their value will be set to <code>NaN</code>. See below</p>
<table>
<thead>
<tr>
<th>CHINA</th>
<th>4.0</th>
</tr>
</thead>
<tbody><tr>
<td>FRANCE</td>
<td>NaN</td>
</tr>
<tr>
<td>GERMANY</td>
<td>NaN</td>
</tr>
<tr>
<td>IRELAND</td>
<td>NaN</td>
</tr>
<tr>
<td>UK</td>
<td>NaN</td>
</tr>
<tr>
<td>USA</td>
<td>2.0</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><ul>
<li>The main data structure in pandas is dataframe and it is built on top of series.</li>
<li>We could say a dataframe is a number of series that share the same index with each other. </li>
<li>Each column or row in a dataframe is a series if we consider it independently.</li>
</ul>
</li>
<li><p>Hard code method for creating a dataframe:</p>
<ul>
<li><p>Method 1(filling each column in a dictionary):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dic1 = &#123;<span class="string">"date"</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],</span><br><span class="line">        <span class="string">"value"</span>:[<span class="number">2</span>,<span class="number">35</span>,<span class="number">64</span>,<span class="number">53</span>,<span class="number">67</span>,<span class="number">64</span>,<span class="number">32</span>,<span class="number">66</span>,<span class="number">87</span>,<span class="number">12</span>],</span><br><span class="line">        <span class="string">"ratio"</span>:[<span class="number">0.2</span>,<span class="number">0.3</span>,<span class="number">0.43</span>,<span class="number">0.52</span>,<span class="number">0.41</span>,<span class="number">0.87</span>,<span class="number">0.12</span>,<span class="number">0.32</span>,<span class="number">0.15</span>,<span class="number">0.76</span>]&#125;</span><br><span class="line">df = pd.DataFrame(dic1)</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Method 2(filling each row in a list): </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df=pd.DataFrame([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">0.2</span>],</span><br><span class="line">                 [<span class="number">2</span>,<span class="number">35</span>,<span class="number">0.3</span>],</span><br><span class="line">                 [<span class="number">3</span>,<span class="number">64</span>,<span class="number">0.43</span>],</span><br><span class="line">                 [<span class="number">4</span>,<span class="number">53</span>,<span class="number">0.52</span>],</span><br><span class="line">                 [<span class="number">5</span>,<span class="number">67</span>,<span class="number">0.41</span>],</span><br><span class="line">                 [<span class="number">6</span>,<span class="number">64</span>,<span class="number">0.87</span>],</span><br><span class="line">                 [<span class="number">7</span>,<span class="number">32</span>,<span class="number">0.12</span>],</span><br><span class="line">                 [<span class="number">8</span>,<span class="number">66</span>,<span class="number">0.32</span>],</span><br><span class="line">                 [<span class="number">9</span>,<span class="number">87</span>,<span class="number">0.15</span>],</span><br><span class="line">                 [<span class="number">10</span>,<span class="number">12</span>,<span class="number">0.76</span>]],columns=[<span class="string">'date'</span>,<span class="string">'value'</span>,<span class="string">'ratio'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Another example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">5</span>,<span class="number">4</span>),columns = [<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>],index = [<span class="string">"CHINA"</span>,<span class="string">"USA"</span>,<span class="string">"UK"</span>,<span class="string">"FRANCE"</span>,<span class="string">"GERMANY"</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Adding new columns to an existing dataframe</p>
<ul>
<li><code>df[&#39;new_column&#39;]=(df.old_1+df.old_2)</code> add a new column from existing columns.</li>
<li><code>df[&#39;name_of_new_column&#39;] = list_of_data</code> add a new column into the dataframe directly.</li>
</ul>
</li>
<li><ul>
<li><code>df.drop(&quot;column name&quot;,axis = 1)</code> remove a column from the dataframe</li>
<li><code>df.drop([&quot;row_index_1&quot;,&quot;row_index_2&quot;],axis = 0)</code> remove a row from the dataframe </li>
</ul>
</li>
<li><p><code>df.index</code> return values in the <strong>index</strong> column of the dataframe. </p>
</li>
<li><p><code>df.columns</code>  return <strong>all column names</strong> of the dataframe.</p>
</li>
<li><p>If in the dataframe, we have missing data, we may assign <code>np.nan</code> to it which stands for <strong>not an number</strong></p>
</li>
<li><p>Slicing columns:</p>
<ul>
<li><code>df.Name_of_column</code> return all values under a column which is a <strong>series</strong>.</li>
<li><code>df[&#39;Name_of_column&#39;]</code> does exactly the same. You are encouraged to use this method.</li>
<li><code>df = df[[&#39;Name_of_column_1&#39;,&#39;Name_of_column_2&#39;]]</code> slicing multiple columns from the dataframe </li>
<li>The attribute method doesn’t need <code>&quot;&quot;</code> while the index method do.</li>
</ul>
</li>
<li><p>Slicing rows:</p>
<ul>
<li><p><code>df.head(n)</code> return first n rows in the dataframe </p>
</li>
<li><p><code>df.tail(n)</code> return last n rows in the dataframe</p>
</li>
<li><p><code>df = df[2:5]</code> slicing the data frame i.e. row 2,3,4</p>
</li>
<li><p><code>df = df.loc[&quot;index_name&quot;,[&#39;Name_of_column_1&#39;,&#39;Name_of_column_2&#39;]]</code></p>
<p>Extremely useful when values inside the index columns are not numerical.</p>
</li>
<li><p><code>df = df.iloc[from_row:to_row,[Index_of_column_1,Index_of_column_2]]</code></p>
<p>Very similar to <code>.loc[]</code> but we can treat index values as numerical based ascending index even though index values themselves may not be numerical. We must use the index numbers of columns instead of name of columns for <code>.iloc</code>.</p>
</li>
<li><p><code>.loc</code> and <code>.iloc</code> methods are based on indexing a matrix in numpy <code>a[row_index,column_index]</code></p>
</li>
</ul>
</li>
<li><p>Example for <code>.loc</code> and <code>.iloc</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">5</span>,<span class="number">4</span>),columns = [<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>],index = [<span class="string">"CHINA"</span>,<span class="string">"USA"</span>,<span class="string">"UK"</span>,<span class="string">"FRANCE"</span>,<span class="string">"GERMANY"</span>])</span><br><span class="line">print(df.loc[[<span class="string">"UK"</span>,<span class="string">"FRANCE"</span>],[<span class="string">"B"</span>,<span class="string">"C"</span>]])</span><br><span class="line">print(df.iloc[<span class="number">2</span>:<span class="number">4</span>,<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<p>These two methods both give data at column “B” and “C” from row “UK” and “FRANCE”.</p>
</li>
<li><p><code>df.loc[row_num,[“Name of the column”]] = new_value</code> modify values in the dataframe</p>
</li>
<li><p><code>df.describle()</code> will return a number of useful statistical data of the dataframe includes: count, mean, std, min, 25% percentile, 50% percentile, 75% percentile and max.</p>
</li>
<li><p><code>df = df.sort_values(Name_of_column,ascending=True)</code> sort the dataframe according to numerical values in the column specified.</p>
</li>
<li><p>Filter:</p>
<ul>
<li><p>Filter by values in a column: <code>df[df[&quot;column_name&quot;]&gt;1.0]</code> applying the <strong>conditional selection</strong> method. This means return rows in the dataframe where we have a <code>True</code>.</p>
</li>
<li><p>Example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">5</span>,<span class="number">4</span>),columns = [<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>],index = [<span class="string">"CHINA"</span>,<span class="string">"USA"</span>,<span class="string">"UK"</span>,<span class="string">"FRANCE"</span>,<span class="string">"GERMANY"</span>])</span><br><span class="line">print(df[df&gt;<span class="number">0.5</span>])</span><br><span class="line">print(df[df[<span class="string">"A"</span>]&gt;<span class="number">0.5</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li><code>df[df&gt;0.5]</code> will return a dataframe with <code>NaN</code> for values less than 0.5. This is because <code>df&gt;0.5</code> will return a dataframe.</li>
<li><code>df[df[&quot;A&quot;]&gt;0.5]</code> will only return rows whose values under column A are greater than 0.5. This is because <code>df[&quot;A&quot;]&gt;0.5</code> will return a pandas series rather than a dataframe.</li>
</ul>
</li>
<li><p>What if we want to put in multiple conditions, we CANNOT simply do <code>df[(df[&quot;A&quot;]&gt;0.5) and  (df[&quot;B&quot;]&gt;0.3)]</code> This is because normal python <code>and</code> doesn’t support pandas series. We need to use <code>&amp;</code> for <code>and</code> operator, <code>|</code> for <code>or</code> operator. See the example below:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">5</span>,<span class="number">4</span>),columns = [<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>],index = [<span class="string">"CHINA"</span>,<span class="string">"USA"</span>,<span class="string">"UK"</span>,<span class="string">"FRANCE"</span>,<span class="string">"GERMANY"</span>])</span><br><span class="line">print(df[(df[<span class="string">"A"</span>]&gt;<span class="number">0.5</span>) &amp; (df[<span class="string">"B"</span>]&gt;<span class="number">0.3</span>)])</span><br><span class="line">print(df[(df[<span class="string">"A"</span>]&gt;<span class="number">0.5</span>) | (df[<span class="string">"B"</span>]&gt;<span class="number">0.3</span>)])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p><code>df.rename(columns = &quot;old name&quot;: &quot;new name&quot;, inplace = True)</code> to change a column name</p>
</li>
<li><p><code>df = df.rename(columns = &quot;old name&quot;: &quot;new name&quot;)</code> does exactly the same</p>
</li>
<li><p>Change multiple column names:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new_name = [<span class="string">"new_date"</span>,<span class="string">"new_value"</span>,<span class="string">"new_ratio"</span>]</span><br><span class="line">df.columns = new_name</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Treating the dataframe as an iterable object, see the example below:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index,row <span class="keyword">in</span> df.iterrows():</span><br><span class="line">    print(index)</span><br><span class="line">    print(row[<span class="string">"A"</span>],row[<span class="string">"B"</span>],row[<span class="string">"C"</span>],row[<span class="string">"D"</span>])</span><br></pre></td></tr></table></figure>

<p>In other words, <code>.iterrows()</code> function will slice each row into pandas series.</p>
</li>
<li><ul>
<li><code>df = df.reset_index()</code> reset customized index back to numerical ascending index, the old index column will become a new column called <code>&quot;index&quot;</code> of the dataframe. It won’t cause confusion as we need to use <code>df.index</code> for new numerical index column and <code>df[&quot;index&quot;]</code> for old index column.</li>
<li><code>df = df.set_index(“name_of_the_column”)</code> will automatically remove the column we select and make it become the index column. </li>
<li>We may use <code>df.index = df[“name_of_the_column”]</code> but we still need to remove the <code>“name_of_the_column”</code> column using <code>df.drop(&quot;name_of_the_column&quot;,axis = 1)</code> </li>
</ul>
</li>
<li><p>Working with compound index: indexing from the outside to inside</p>
<ul>
<li><p>Producing a dataframe with compound index</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">outside = [<span class="string">'G1'</span>,<span class="string">'G1'</span>,<span class="string">'G1'</span>,<span class="string">'G2'</span>,<span class="string">'G2'</span>,<span class="string">'G2'</span>]</span><br><span class="line">inside = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">hier_index = list(zip(outside,inside))</span><br><span class="line">hier_index = pd.MultiIndex.from_tuples(hier_index)</span><br><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">6</span>,<span class="number">2</span>),index=hier_index,columns=[<span class="string">'A'</span>,<span class="string">'B'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>

<p>This will produce the following dataframe with two columns of index.</p>
<table>
<thead>
<tr>
<th>Group</th>
<th>Num</th>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>1</td>
<td>0.153661</td>
<td>0.167638</td>
</tr>
<tr>
<td>G1</td>
<td>2</td>
<td>-0.765930</td>
<td>0.962299</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>0.902826</td>
<td>-0.537909</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>-1.549671</td>
<td>0.435253</td>
</tr>
<tr>
<td>G2</td>
<td>2</td>
<td>1.259904</td>
<td>-0.447898</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>0.266207</td>
<td>0.412580</td>
</tr>
</tbody></table>
</li>
<li><p>If we want to index 0.412580 at the bottom right corner, use: <code>print(df.loc[&quot;G2&quot;].loc[3,&quot;B&quot;])</code></p>
</li>
<li><p><code>df.loc[&quot;G2&quot;]</code> returns a dataframe with 3 rows under G2. Do <code>.loc</code> again inside this dataframe.</p>
</li>
<li><p><code>df.index.names = [&#39;Group&#39;,&#39;Num&#39;]</code> assign column names to compound index</p>
</li>
<li><p>What if rows with inside index <code>Num=1</code> are needed? It is a bit tedious to use <code>.loc</code> multiple times. There is another method: <code>print(df.xs(1,level=&#39;Num&#39;))</code> The <code>level</code> attribute specifies the column inside the compound index.</p>
</li>
</ul>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          
        
        <div class="post-tags">
            <a href="/tags/Python/" rel="tag"># Python</a>
          
            <a href="/tags/Pandas/" rel="tag"># Pandas</a>
          
        </div>
        <div class="post-widgets">
        
          <div class="wp_rating">
            <div id="wpac-rating"></div>
          </div>
        

        

        
        </div>
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/numpy_notes/" rel="next" title="Numpy notes">
                <i class="fa fa-chevron-left"></i> Numpy notes
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
              <a href="/pandas_advanced/" rel="prev" title="Pandas advanced">
                Pandas advanced <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yuxuan Liu</p>
  <div class="site-description motion-element" itemprop="description">Welcome to my personal blog</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/oscarliu99" title="GitHub &rarr; https://github.com/oscarliu99" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:oscarliu991110@gmail.com" title="E-Mail &rarr; mailto:oscarliu991110@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.linkedin.com/in/yuxuan-liu-588090134/" title="Linkedin &rarr; https://www.linkedin.com/in/yuxuan-liu-588090134/" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.facebook.com/yuxuan.liu.99" title="FB Page &rarr; https://www.facebook.com/yuxuan.liu.99" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://i.loli.net/2019/09/09/agwTuhdslZc63xe.jpg" title="Wechat &rarr; https://i.loli.net/2019/09/09/agwTuhdslZc63xe.jpg" rel="noopener" target="_blank"><i class="fa fa-fw fa-weixin"></i>Wechat</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://yuxuanliu.tech/CV.pdf" title="Résumé &rarr; https://yuxuanliu.tech/CV.pdf"><i class="fa fa-fw fa-file"></i>Résumé</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pandas-Python-data-analysis-library-basics"><span class="nav-text">Pandas(Python data analysis library) basics</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user-circle"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuxuan Liu. All rights reserved.</span>
</div>
<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style='display:none'>
    Total visitor: <span id="busuanzi_value_site_pv"></span>
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style='display:none'>
    <span id="busuanzi_value_site_uv"></span> people have read my articles.
</span>
</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    
  <div class="addthis_inline_share_toolbox">
  <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5d760fe3ab778431" async="async"></script>
</div>


  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>






  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>












  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: 20845,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>



  <script src="/js/local-search.js?v=7.3.0"></script>














  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


    

<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', function() {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: true,
    notify: true,
    appId: '5yS5iCBBQeh4I83PJnNiPhWn-gzGzoHsz',
    appKey: '3gi8JsrdAcPMFzGdPSnOGuuW',
    placeholder: 'Please feel free to leave a comment :)',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: 'en' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

</body>
</html>
