<!DOCTYPE html>





<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Header1.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Header1.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Header1.png?v=7.3.0">
  <meta name="baidu-site-verification" content="4Z230QvLFPWJYfG5">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Database(DB): Any collection of related information that can be stored in different ways.  Database management system(DBMS): software used to manage data in the database.  C.R.U.D: Create Read Update">
<meta name="keywords" content="Mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql basics">
<meta property="og:url" content="https://yuxuanliu.tech/Mysql_basics/index.html">
<meta property="og:site_name" content="Logical thinking">
<meta property="og:description" content="Database(DB): Any collection of related information that can be stored in different ways.  Database management system(DBMS): software used to manage data in the database.  C.R.U.D: Create Read Update">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-09-11T15:34:43.946Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mysql basics">
<meta name="twitter:description" content="Database(DB): Any collection of related information that can be stored in different ways.  Database management system(DBMS): software used to manage data in the database.  C.R.U.D: Create Read Update">
  <link rel="canonical" href="https://yuxuanliu.tech/Mysql_basics/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Mysql basics | Logical thinking</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Logical thinking</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Keep exploring</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
      </li>
    
  </ul>

    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>


    </div>
</nav>
</div>
    </header>

    

  <a href="https://github.com/oscarliu99" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yuxuanliu.tech/Mysql_basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuxuan Liu">
      <meta itemprop="description" content="Welcome to my personal blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logical thinking">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">Mysql basics

            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 08-09-2019 13:25:57" itemprop="dateCreated datePublished" datetime="2019-09-08T13:25:57+01:00">08-09-2019</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 11-09-2019 16:34:43" itemprop="dateModified" datetime="2019-09-11T16:34:43+01:00">11-09-2019</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a></span>

                
                
              
            </span>
          

          
            
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="fa fa-comment-o"></i>
    </span>
    <span class="post-meta-item-text">Comments: </span>
  
    <a href="/Mysql_basics/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/Mysql_basics/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ol>
<li><p>Database(DB): Any collection of related information that can be stored in different ways.</p>
</li>
<li><p>Database management system(DBMS): software used to manage data in the database.</p>
</li>
<li><p>C.R.U.D: Create Read Update Delete</p>
</li>
<li><p>Relational databases(SQL): organize data onto one or more tables similar to Excel.</p>
</li>
<li><p>Non-relational databases(no SQL): Everything but not SQL like <code>JSON</code>,<code>XML</code> etc.</p>
</li>
<li><p>SQL(Structured Query Language): standard language interacts with DBMS to perform C.R.U.D operations.</p>
</li>
<li><p>Database queries: requests made to the DBMS for specific information, in other words, asks the database for specific pieces of information</p>
</li>
<li><p>There is always a primary key to a table, each row has its own primary key.</p>
<a id="more"></a>
</li>
<li><p>A row may also have a foreign key which leads to a primary key to a different table. This foreign key will help us link with other tables. A certain row may have multiple foreign keys. A foreign key may also lead to a different row in the same table</p>
</li>
<li><p>Composite key: a key made up of multiple columns i.e. multiple attributes. We need composite keys because sometimes one column can’t define a primary key without repeating so we need multiple columns as the key.</p>
</li>
<li><p>SQL language is the compound of a series of languages as followed: Data Query Language(DQL), Data Definition Language(DDL), Data Control Language(DCL) and Data Manipulation Language(DML)</p>
</li>
<li><p>Queries: a set of instructions given to DBMS to obtain the information you want to retrieve.</p>
</li>
<li><p>Data type:  <code>INT</code>: integer; <code>DECIMAL(M,N)</code>: M means the total number of significant digits; N means the number of digits you want to keep after the decimal place; <code>VARCHAR(L)</code>: L means the length of the string; <code>BLOB</code>: binary a large object, a structure can store large amount of binary data; <code>DATE</code>: YYYY-MM-DD; <code>TIMESTAMP</code>: YYYY-MM-DD HH-MM-SS normally used to record time</p>
</li>
<li><p>People normally write reserved words in SQL in capital letters such as <code>CREATE TABLE</code></p>
</li>
<li><p>Create columns: </p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student(</span><br><span class="line">student_id INT,</span><br><span class="line">name VARCHAR(20),</span><br><span class="line">major VARCHAR(20),</span><br><span class="line">PRIMARY KEY(student_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><code>CREATE TABLE</code>: reserved words</p>
<p><code>student</code>: table name</p>
<p><code>student_id</code>, <code>name</code>, <code>major</code>: column name</p>
<p><code>INT</code>,<code>VARCHAR()</code>: datatype</p>
<p><code>PRIMARY KEY()</code>: reserved words, put the column name inside brackets.</p>
<p>Make sure to end the line with <code>;</code></p>
<p><code>DESCRIBE student;</code> This command will give some basic information about the table.</p>
<ol start="16">
<li><p>We can modify the structure of the table after created.</p>
<p><code>DROP TABLE student;</code>    Delete the whole table <code>student</code></p>
<p><code>ALTER TABLE student ADD gpa DECIMAL(3,2);</code>   Add an extra column</p>
<p><code>ALTER TABLE student DROP COLUMN gpa;</code>    Remove a column from the list</p>
</li>
</ol>
<p><code>name VARCHAR(20) NOT NULL</code> When creating a table we may put <code>NOT NULL</code> after the column name so data in this column can’t be <code>NULL</code>. Similarly, we could also put <code>UNIQUE</code>, which means that all data must be unique in that table</p>
<ol start="17">
<li><p>The primary key must be both <code>NOT NULL</code> and <code>UNIQUE</code>.</p>
</li>
<li><p><code>major VARCHAR(20) DEFAULT &#39;undecided&#39;</code> We could set a default value to certain columns</p>
</li>
<li><p>We could also set the value to be <code>AUTO_INCREMENT</code>, which may be quite useful for the primary key, simply do <code>student_id INT AUTO_INCREMENT</code>.</p>
</li>
<li><p>Inserting data:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO student VALUES(1,&quot;Jack&quot;,&quot;Biology&quot;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><code>INSERT</code>: reserved word to put data into the table</p>
<p><code>INTO</code>: reserved word</p>
<p><code>student</code>: table name</p>
<p><code>VALUES()</code>: reserved word, there are three parameters in the bracket. One for each column.</p>
<p>We may put <code>NULL</code> in the bracket and it is equivalent to not being filled. </p>
<p><code>SELECT * FROM student</code> This command will print out all data from the table.</p>
<p><code>INSERT INTO student(student_id, name) VALUES(2,&quot;Kate&quot;);</code></p>
<p>If we only want to fill in data in two columns rather than all three. We could put a bracket after table name and fill in column names that we wish to fill and leaving the unfilled ones <code>NULL</code>. Unless <code>DEFAULT</code>, <code>AUTO_INCREMENT</code> etc. are used.</p>
<ol start="21">
<li><p><code>&lt;&gt;</code> means not equal in MySQL.</p>
</li>
<li><p>Update data:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE student</span><br><span class="line">SET major = &quot;Bio&quot;</span><br><span class="line">WHERE major = &quot;Biology&quot;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><code>UPDATE</code>: reserved word for changing data</p>
<p><code>SET</code>: reserved word for setting new data</p>
<p><code>WHERE</code>: reserved word to filter the part of data we want to change</p>
<p>Similarly, lines below will set gpa to be 4.0 at the row with <code>student_id = 1</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE student</span><br><span class="line">SET gpa = 4.0</span><br><span class="line">WHERE student_id = 1;</span><br></pre></td></tr></table></figure>

<p>For the <code>WHERE</code> command, we can make it more complex by using <code>OR</code>, <code>AND</code> etc statements.</p>
<p>We can also change multiple columns in one line using <code>SET</code>. See below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE student</span><br><span class="line">SET gpa = 4.0, name = &apos;Oscar&apos;</span><br><span class="line">WHERE student_id = 1;</span><br></pre></td></tr></table></figure>

<ol start="23">
<li><p>Delete data: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM student</span><br><span class="line">WHERE name = &quot;Tom&quot; AND major = &quot;undecided&quot;</span><br></pre></td></tr></table></figure>

<p>The operation above will delete a certain row according to the <code>WHERE</code> condition. Without <code>WHERE</code>, all rows will be deleted.</p>
</li>
<li><p>Basic query:  <code>SELECT * FROM student;</code></p>
<p>We already know the query above will give us all the data in the table.</p>
</li>
</ol>
<p><code>SELECT</code>: reserved word, tell SQL we want to get some information from the database.</p>
<p>We can get data from certain column(s) by filling its name after <code>SELECT</code>, see below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT student_name, student_subject FROM student;</span><br></pre></td></tr></table></figure>

<p>The line below is equivalent to the line above, using <code>student.student_id</code> &amp; <code>student.student_subject</code> but make your language more precise.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.student_name,student.student_subject FROM student;</span><br></pre></td></tr></table></figure>

<p>We may also order the data obtained simply using reserved word <code>ORDER BY</code> + column name.</p>
<p>By default it is ascending, we can make it descending by adding <code>DESC</code> after the column name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT student.name, student.major</span><br><span class="line">FROM student</span><br><span class="line">ORDER BY name;</span><br></pre></td></tr></table></figure>

<p>We could also fill multiple column names after <code>ORDER BY</code>. In the case below, if <code>major</code> is the same, <code>student_id</code> will be used for ranking.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM student</span><br><span class="line">ORDER BY major, student_id;</span><br></pre></td></tr></table></figure>

<p>If we only want a certain number of results, we can add an extra line <code>LIMIT 2</code> so we will only get the top 2 results in the list.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM student</span><br><span class="line">ORDER BY major, student_id</span><br><span class="line">LIMIT 2;</span><br></pre></td></tr></table></figure>

<p>Filter operation can be done by using <code>WHERE</code>, similar to the operation used in the update data section. In this case, we only print out student information who is doing Biology</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM student</span><br><span class="line">WHERE major = &quot;Biology&quot;;</span><br></pre></td></tr></table></figure>

<ol start="25">
<li>If we want to add comments in MySQL use <code>--</code> at the start of the line</li>
<li><code>IN</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM student</span><br><span class="line">WHERE name IN (&quot;Claire&quot;, &quot;Kate&quot;, &quot;Mike&quot;);</span><br></pre></td></tr></table></figure>

<p>Another thing you can put after <code>WHERE</code> is <code>IN</code> (reserved word). Very similar to Python, which means return all data in the <code>name</code> column which are in the list of <code>[Claire, Kate, Mike]</code>. You can also connect other statements for filtration using <code>AND</code>, <code>OR</code> etc.</p>
<ol start="27">
<li>Creating a foreign key when creating a table:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FOREIGN KEY(column_name) REFERENCES table_name(column_name)</span><br><span class="line">ON DELETE SET NULL;</span><br></pre></td></tr></table></figure>

<p>For the column we <code>REFERENCES</code> to, it must be the <code>primary key</code>.</p>
<p>We will always put <code>ON DELETE SET NULL</code> or <code>ON DELETE CASCADE</code> when creating a <code>foreign key</code>, this will make our lives a lot easier and I will explain it a bit later.</p>
<ol start="28">
<li><p>Add foreign key after a table is created:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE employee</span><br><span class="line">ADD FOREIGN KEY(branch_id)</span><br><span class="line">REFERENCES branch(branch_id)</span><br><span class="line">ON DELETE SET NULL;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>This is faily commonly used as we can’t reference foreign key to another table before the other table is created first.</p>
<p>Don’t forget <code>ON DELETE SET NULL</code></p>
<ol start="29">
<li>Set a composite primary key:</li>
</ol>
<p>Simply use <code>PRIMARY KEY(column1,column2)</code>when creating a table</p>
<ol start="30">
<li><p>A primary key may also be A foreign key. VERY VERY IMPORTANT!!!!!</p>
</li>
<li><p>If we want to set foreign keys reference to a different form. It is very likely that the second form has not been created. If we still set foreign keys, no wonder there will be an error. What we should do is to set elements in the foreign key column to be <code>NULL</code>. Create the second table first, then <code>UPDATE</code>,  <code>SET</code> elements in the foreign key column. It is kinda like a circular procedure.</p>
<p>当我们向有foreign key的表格中插入内容时 要考虑一个问题， 就是这个foreign key指向的表格的内容很可能还没有被输入 这时就会报错 我们要做的就是把这些foreign key 的值先写成<code>NULL</code> 待指向的表格的内容输入后 再进行UPDATE </p>
</li>
</ol>
<ol start="32">
<li><p>We can temporarily change the returned <code>column names</code> by using <code>AS</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT fitst_name AS forename, last_name AS surname</span><br><span class="line">FROM employee;</span><br></pre></td></tr></table></figure>

<p>Column names are <code>forename</code> &amp; <code>surname</code> now instead of <code>first_name</code> &amp; <code>last_name</code>.</p>
</li>
<li><p>If we want to get rid of repeated elements in a column we can use <code>DISTINCT</code>.</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT branch_id FROM employee;</span><br></pre></td></tr></table></figure>

<ol start="34">
<li><p>Internal functions:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(emp_id)</span><br><span class="line">FROM employee;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>This <code>COUNT</code> function will count how many elements appeared in the <code>emp_id</code> column and return an <code>INT</code> value. If one of the element is <code>NULL</code>, it won’t be counted as it stands for <code>no value</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(emp_id)</span><br><span class="line">FROM employee</span><br><span class="line">WHERE sex = &quot;F&quot; AND birth_date &gt; &apos;1970-01-01&apos;;</span><br></pre></td></tr></table></figure>

<p>Various operations can be achieved using <code>COUNT</code> in together with <code>WHERE</code>. The example above can help us find how many female employees are born after 1970-1-1. Be careful, 1970-01- 01 is another datatype: <code>DATE</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary)</span><br><span class="line">From employee</span><br><span class="line">WHERE sex = &quot;M&quot;;</span><br></pre></td></tr></table></figure>

<p>Another function we may use is <code>AVG</code>, which will return the mean of elements in the column selected. Here, we are finding the mean salary of male employees.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(salary)</span><br><span class="line">FROM employee;</span><br></pre></td></tr></table></figure>

<p><code>SUM</code> function we give us the numerical sum of elements we selected from the database.</p>
<ol start="35">
<li><p>Aggregation(聚合):</p>
<p><code>GROUP BY</code> is a powerful tool, we could put a column name afterwards and repeated elements in that column will be treated together as a group.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(sex), sex</span><br><span class="line">FROM employee</span><br><span class="line">GROUP BY sex;</span><br></pre></td></tr></table></figure>

<p>Here we want to find out the number of male and female employee respectively. <code>GROUP BY</code> is suitable here as it put all elements with <code>sex =&quot;M&quot;</code> together in a group and <code>sex = &quot;F&quot;</code> together in a different group. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(total_sales), emp_id</span><br><span class="line">FROM works_with</span><br><span class="line">GROUP BY emp_id;</span><br></pre></td></tr></table></figure>

<p>Similarly, we can find the sum of sales of each employee using <code>GROUP BY</code></p>
</li>
</ol>
<ol start="36">
<li>Wildcard(通配符): <code>%</code> means any number of characters <code>_</code> means one character. It is similar to  regular expressions in other programming languages(正则表达式). In other words, wildcard means using <code>%</code> and <code>_</code> to describe a general pattern to help us filter result.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM client</span><br><span class="line">WHERE clien_name LIKE &quot;%LLC&quot;</span><br></pre></td></tr></table></figure>

<p>The example above has a new reserved word <code>LIKE</code>. A statement is followed by, which will describe a general pattern. Here <code>‘%LLC’</code> means there can be any number of words before <code>&quot;LLC&quot;</code> and the word needs to end up with <code>&quot;LLC&quot;</code>. If the statement is satisfied. The result will be returned, otherwise filtered.​    </p>
<p>Another wildcard example: <code>%Label%</code>. This means the statement is satisfied as long as the <code>VARCHAR</code> contains a subsection <code>&quot;Label&quot;</code> </p>
<ol start="37">
<li>Union: combine several <code>SELECT</code> results together(union columns together). This links two or multiple <code>SELECT</code> statements.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT first_name</span><br><span class="line">FROM employee</span><br><span class="line">UNION</span><br><span class="line">SELECT branch_name</span><br><span class="line">FROM branch;</span><br></pre></td></tr></table></figure>

<p>Criteria: In order to successfully <code>UNION</code> multiple <code>SELECT</code> statements, each <code>SELECT</code> must have the same number of columns, otherwise there will be an error. We also need the <code>datatype</code> returned from each <code>SELECT</code> to be similar. If they are really different, there are likely to be an error as well.</p>
<ol start="38">
<li><code>JOIN</code>: combine rows from two or more tables based on related columns(foreign keys)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee.emp_id, employee.first_name, branch.branch_name</span><br><span class="line">FROM employee</span><br><span class="line">JOIN branch</span><br><span class="line">ON employee.emp_id = branch.mgr_id;</span><br></pre></td></tr></table></figure>

<p>The example above <code>SELECT</code> columns from different tables.</p>
<p><code>FROM</code>: reserved words(first table)</p>
<p><code>JOIN</code>: reserved words(second table)</p>
<p><code>ON</code>: reserved words, it tells MySQL, on what basis, rows should be joined together.</p>
<p>In other words, if and only if <code>employee.emp_id</code> = <code>branch.mgr_id</code>, should rows from different tables join together.</p>
<p>There is a second type called <code>LEFT JOIN</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee.emp_id, employee.first_name, branch.branch_name</span><br><span class="line">FROM employee</span><br><span class="line">LEFT JOIN branch</span><br><span class="line">ON employee.emp_id = branch.mgr_id;</span><br></pre></td></tr></table></figure>

<p>Every row in the FROM <code>employee</code> table will be shown. For the <code>branch.branch_name</code>, it will only join to the left table if <code>ON</code> condition is met, otherwise, its value will be <code>NULL</code>.</p>
<p>There is also an opposite type of operation, which is <code>RIGHT JOIN</code>. It does exactly the opposite. Each row in the <code>RIGHT JOIN</code> table will be shown and rows in the <code>FROM</code> table will join only if <code>ON</code> condition is met, otherwise, it will be <code>NULL</code></p>
<ol start="39">
<li>Nested enquiry: We can use result from one query to filter data in another query.  See the example below. It is like cascading the result of one enquiry into the other.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT works_with.emp_id</span><br><span class="line">FROM works_with</span><br><span class="line">WHERE works_with.total_sales &gt; 30000;</span><br></pre></td></tr></table></figure>

<p>Here, we find out employee id of employees whose salary exceeds 30k. What we can do is to put the statements above into another query as followed</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee.first_name, employee.last_name</span><br><span class="line">FROM employee</span><br><span class="line">WHERE employee.emp_id IN(</span><br><span class="line">    SELECT works_with.emp_id</span><br><span class="line">	FROM works_with</span><br><span class="line">	WHERE works_with.total_sales &gt; 30000;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The part indented return a list of<code>employee_id</code>. <code>WHERE</code> filters ID that is not in the list so we only print out names of employees whose salary exceeds 30K. This is a useful method when handling data in different tables.</p>
<p> In terms of the indent above, it is not necessary but makes readers easy to read.</p>
<ol start="40">
<li><code>On Delete</code>: how can we delete an element when it is associated with a foreign key.</li>
</ol>
<p>We already meet it before, remember when we set foreign key, we put an extra line which is <code>ON DELETE SET NULL</code>/<code>ON DELETE CASCADE</code>. That is what we are going to talk about now.</p>
<p> <code>ON DELETE SET NULL</code>: means when we delete the primary key where the foreign key may lead to, this foreign key will automatically become <code>NULL</code> so there will be no error.</p>
<p> <code>ON DELETE CASCADE</code>: will delete the entire row where the foreign key located instead of setting it to <code>NULL</code>.</p>
<p>When the <code>foreign key</code> is also a <code>primary key</code>, we must use <code>ON DELETE CASCADE</code> because primary key can’t be <code>NULL</code>. Otherwise, we are free to choose between the two.</p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>Thanks for reading. These notes are abstract from the <a href="https://www.mikedane.com/databases/sql/" target="_blank" rel="noopener">MySQL tutorial</a> created by <a href="https://www.mikedane.com/" target="_blank" rel="noopener">Mike Dane</a>(Giraffe academy). Tables used as the demo in the tutorial can be found <a href="https://www.mikedane.com/databases/sql/company-database.pdf" target="_blank" rel="noopener">here</a>.</p>
<p>I want to express my thanks to Mike. Awesome videos as always. Make sure to check out his website, contents are absolutely amazing.</p>

    </div>

    
    
    

    <footer class="post-footer">
          
        
        <div class="post-tags">
            <a href="/tags/Mysql/" rel="tag"># Mysql</a>
          
        </div>
        <div class="post-widgets">
        
          <div class="wp_rating">
            <div id="wpac-rating"></div>
          </div>
        

        

        
        </div>
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/python_basics/" rel="next" title="Python basics">
                <i class="fa fa-chevron-left"></i> Python basics
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
              <a href="/python_revision/" rel="prev" title="Python revision notes">
                Python revision notes <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yuxuan Liu</p>
  <div class="site-description motion-element" itemprop="description">Welcome to my personal blog</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/oscarliu99" title="GitHub &rarr; https://github.com/oscarliu99" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:oscarliu991110@gmail.com" title="E-Mail &rarr; mailto:oscarliu991110@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.linkedin.com/in/yuxuan-liu-588090134/" title="Linkedin &rarr; https://www.linkedin.com/in/yuxuan-liu-588090134/" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.facebook.com/yuxuan.liu.99" title="FB Page &rarr; https://www.facebook.com/yuxuan.liu.99" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://i.loli.net/2019/09/09/agwTuhdslZc63xe.jpg" title="Wechat &rarr; https://i.loli.net/2019/09/09/agwTuhdslZc63xe.jpg" rel="noopener" target="_blank"><i class="fa fa-fw fa-weixin"></i>Wechat</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://bit.ly/2kdLxVu" title="Résumé &rarr; https://bit.ly/2kdLxVu" rel="noopener" target="_blank"><i class="fa fa-fw fa-file"></i>Résumé</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#End"><span class="nav-text">End</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user-circle"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuxuan Liu. All rights reserved.</span>
</div>
<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style='display:none'>
    Total visitor: <span id="busuanzi_value_site_pv"></span>
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style='display:none'>
    <span id="busuanzi_value_site_uv"></span> people have read my articles.
</span>
</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    
  <div class="addthis_inline_share_toolbox">
  <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5d760fe3ab778431" async="async"></script>
</div>


  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>






  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>












  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: 20845,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>



  <script src="/js/local-search.js?v=7.3.0"></script>














  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


    

<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', function() {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: true,
    notify: true,
    appId: '5yS5iCBBQeh4I83PJnNiPhWn-gzGzoHsz',
    appKey: '3gi8JsrdAcPMFzGdPSnOGuuW',
    placeholder: 'Please feel free to leave a comment :)',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: 'en' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script>

</body>
</html>
